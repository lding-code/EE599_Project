import { __assign, __decorate, __metadata, __param } from "tslib";
import { Injectable, InjectionToken, Optional, Inject } from '@angular/core';
import { Subject, BehaviorSubject } from 'rxjs';
import * as i0 from "@angular/core";
export var EDITOR_SETTINGS = new InjectionToken('EDITOR_SETTINGS');
var CodeEditorService = /** @class */ (function () {
    function CodeEditorService(settings) {
        // baseUrl = 'assets/monaco';
        this.baseUrl = 'https://unpkg.com/monaco-editor/min';
        // typingsWorkerUrl = 'assets/workers/typings-worker.js';
        this.typingsWorkerUrl = 'https://unpkg.com/@ngstack/code-editor/workers/typings-worker.js';
        this.typingsLoaded = new Subject();
        this.loaded = new Subject();
        this.loadingTypings = new BehaviorSubject(false);
        var defaults = __assign({ baseUrl: this.baseUrl, typingsWorkerUrl: this.typingsWorkerUrl }, settings);
        this.baseUrl = defaults.baseUrl;
        this.typingsWorkerUrl = defaults.typingsWorkerUrl;
    }
    CodeEditorService.prototype.loadTypingsWorker = function () {
        var _this = this;
        if (!this.typingsWorker && window.Worker) {
            if (this.typingsWorkerUrl.startsWith('http')) {
                var proxyScript = "importScripts('" + this.typingsWorkerUrl + "');";
                var proxy = URL.createObjectURL(new Blob([proxyScript], { type: 'text/javascript' }));
                this.typingsWorker = new Worker(proxy);
            }
            else {
                this.typingsWorker = new Worker(this.typingsWorkerUrl);
            }
            this.typingsWorker.addEventListener('message', function (e) {
                _this.loadingTypings.next(false);
                _this.typingsLoaded.next(e.data);
            });
        }
        return this.typingsWorker;
    };
    CodeEditorService.prototype.loadTypings = function (dependencies) {
        if (dependencies && dependencies.length > 0) {
            var worker = this.loadTypingsWorker();
            if (worker) {
                this.loadingTypings.next(true);
                worker.postMessage({
                    dependencies: dependencies
                });
            }
        }
    };
    CodeEditorService.prototype.loadEditor = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var onGotAmdLoader = function () {
                window.require.config({
                    paths: { vs: _this.baseUrl + "/vs" }
                });
                if (_this.baseUrl.startsWith('http')) {
                    var proxyScript = "\n            self.MonacoEnvironment = {\n              baseUrl: \"" + _this.baseUrl + "\"\n            };\n            importScripts('" + _this.baseUrl + "/vs/base/worker/workerMain.js');\n          ";
                    var proxy_1 = URL.createObjectURL(new Blob([proxyScript], { type: 'text/javascript' }));
                    window['MonacoEnvironment'] = {
                        getWorkerUrl: function () {
                            return proxy_1;
                        }
                    };
                }
                window.require(['vs/editor/editor.main'], function () {
                    _this.loaded.next({ monaco: monaco });
                    resolve();
                });
            };
            if (!window.require) {
                var loaderScript = document.createElement('script');
                loaderScript.type = 'text/javascript';
                loaderScript.src = _this.baseUrl + "/vs/loader.js";
                loaderScript.addEventListener('load', onGotAmdLoader);
                document.body.appendChild(loaderScript);
            }
            else {
                onGotAmdLoader();
            }
        });
    };
    CodeEditorService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [EDITOR_SETTINGS,] }] }
    ]; };
    CodeEditorService.ɵprov = i0.ɵɵdefineInjectable({ factory: function CodeEditorService_Factory() { return new CodeEditorService(i0.ɵɵinject(EDITOR_SETTINGS, 8)); }, token: CodeEditorService, providedIn: "root" });
    CodeEditorService = __decorate([
        Injectable({
            providedIn: 'root'
        }),
        __param(0, Optional()),
        __param(0, Inject(EDITOR_SETTINGS)),
        __metadata("design:paramtypes", [Object])
    ], CodeEditorService);
    return CodeEditorService;
}());
export { CodeEditorService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZS1lZGl0b3Iuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuZ3N0YWNrL2NvZGUtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL2NvZGUtZWRpdG9yLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0UsT0FBTyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7O0FBS2hELE1BQU0sQ0FBQyxJQUFNLGVBQWUsR0FBRyxJQUFJLGNBQWMsQ0FDL0MsaUJBQWlCLENBQ2xCLENBQUM7QUFlRjtJQWVFLDJCQUdFLFFBQTRCO1FBakI5Qiw2QkFBNkI7UUFDN0IsWUFBTyxHQUFHLHFDQUFxQyxDQUFDO1FBRWhELHlEQUF5RDtRQUN6RCxxQkFBZ0IsR0FDZCxrRUFBa0UsQ0FBQztRQUVyRSxrQkFBYSxHQUFHLElBQUksT0FBTyxFQUFlLENBQUM7UUFDM0MsV0FBTSxHQUFHLElBQUksT0FBTyxFQUFtQixDQUFDO1FBRXhDLG1CQUFjLEdBQUcsSUFBSSxlQUFlLENBQVUsS0FBSyxDQUFDLENBQUM7UUFTbkQsSUFBTSxRQUFRLGNBQ1osT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQ3JCLGdCQUFnQixFQUFFLElBQUksQ0FBQyxnQkFBZ0IsSUFDcEMsUUFBUSxDQUNaLENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFDaEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQztJQUNwRCxDQUFDO0lBRU8sNkNBQWlCLEdBQXpCO1FBQUEsaUJBaUJDO1FBaEJDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFVLE1BQU8sQ0FBQyxNQUFNLEVBQUU7WUFDL0MsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENB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Q0FBQyxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUM7Z0JBQ3RELFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQ3pDO2lCQUFNO2dCQUNMLGNBQWMsRUFBRSxDQUFDO2FBQ2xCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOztnREFyRkUsUUFBUSxZQUNSLE1BQU0sU0FBQyxlQUFlOzs7SUFqQmQsaUJBQWlCO1FBSDdCLFVBQVUsQ0FBQztZQUNWLFVBQVUsRUFBRSxNQUFNO1NBQ25CLENBQUM7UUFpQkcsV0FBQSxRQUFRLEVBQUUsQ0FBQTtRQUNWLFdBQUEsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFBOztPQWpCZixpQkFBaUIsQ0FzRzdCOzRCQTdIRDtDQTZIQyxBQXRHRCxJQXNHQztTQXRHWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3Rpb25Ub2tlbiwgT3B0aW9uYWwsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3ViamVjdCwgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDb2RlRWRpdG9yU2V0dGluZ3MgfSBmcm9tICcuLi9lZGl0b3Itc2V0dGluZ3MnO1xuXG5kZWNsYXJlIGNvbnN0IG1vbmFjbzogYW55O1xuXG5leHBvcnQgY29uc3QgRURJVE9SX1NFVFRJTkdTID0gbmV3IEluamVjdGlvblRva2VuPENvZGVFZGl0b3JTZXR0aW5ncz4oXG4gICdFRElUT1JfU0VUVElOR1MnXG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIFR5cGluZ3NJbmZvIHtcbiAgZW50cnlQb2ludHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIGZpbGVzOiBBcnJheTx7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH0+O1xufVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBDb2RlRWRpdG9yU2VydmljZSB7XG4gIC8vIGJhc2VVcmwgPSAnYXNzZXRzL21vbmFjbyc7XG4gIGJhc2VVcmwgPSAnaHR0cHM6Ly91bnBrZy5jb20vbW9uYWNvLWVkaXRvci9taW4nO1xuXG4gIC8vIHR5cGluZ3NXb3JrZXJVcmwgPSAnYXNzZXRzL3dvcmtlcnMvdHlwaW5ncy13b3JrZXIuanMnO1xuICB0eXBpbmdzV29ya2VyVXJsID1cbiAgICAnaHR0cHM6Ly91bnBrZy5jb20vQG5nc3RhY2svY29kZS1lZGl0b3Ivd29ya2Vycy90eXBpbmdzLXdvcmtlci5qcyc7XG5cbiAgdHlwaW5nc0xvYWRlZCA9IG5ldyBTdWJqZWN0PFR5cGluZ3NJbmZvPigpO1xuICBsb2FkZWQgPSBuZXcgU3ViamVjdDx7IG1vbmFjbzogYW55IH0+KCk7XG5cbiAgbG9hZGluZ1R5cGluZ3MgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcblxuICBwcml2YXRlIHR5cGluZ3NXb3JrZXI6IFdvcmtlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBAT3B0aW9uYWwoKVxuICAgIEBJbmplY3QoRURJVE9SX1NFVFRJTkdTKVxuICAgIHNldHRpbmdzOiBDb2RlRWRpdG9yU2V0dGluZ3NcbiAgKSB7XG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICBiYXNlVXJsOiB0aGlzLmJhc2VVcmwsXG4gICAgICB0eXBpbmdzV29ya2VyVXJsOiB0aGlzLnR5cGluZ3NXb3JrZXJVcmwsXG4gICAgICAuLi5zZXR0aW5nc1xuICAgIH07XG5cbiAgICB0aGlzLmJhc2VVcmwgPSBkZWZhdWx0cy5iYXNlVXJsO1xuICAgIHRoaXMudHlwaW5nc1dvcmtlclVybCA9IGRlZmF1bHRzLnR5cGluZ3NXb3JrZXJVcmw7XG4gIH1cblxuICBwcml2YXRlIGxvYWRUeXBpbmdzV29ya2VyKCk6IFdvcmtlciB7XG4gICAgaWYgKCF0aGlzLnR5cGluZ3NXb3JrZXIgJiYgKDxhbnk+d2luZG93KS5Xb3JrZXIpIHtcbiAgICAgIGlmICh0aGlzLnR5cGluZ3NXb3JrZXJVcmwuc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgICAgIGNvbnN0IHByb3h5U2NyaXB0ID0gYGltcG9ydFNjcmlwdHMoJyR7dGhpcy50eXBpbmdzV29ya2VyVXJsfScpO2A7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChcbiAgICAgICAgICBuZXcgQmxvYihbcHJveHlTY3JpcHRdLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMudHlwaW5nc1dvcmtlciA9IG5ldyBXb3JrZXIocHJveHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50eXBpbmdzV29ya2VyID0gbmV3IFdvcmtlcih0aGlzLnR5cGluZ3NXb3JrZXJVcmwpO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBpbmdzV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBlID0+IHtcbiAgICAgICAgdGhpcy5sb2FkaW5nVHlwaW5ncy5uZXh0KGZhbHNlKTtcbiAgICAgICAgdGhpcy50eXBpbmdzTG9hZGVkLm5leHQoZS5kYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50eXBpbmdzV29ya2VyO1xuICB9XG5cbiAgbG9hZFR5cGluZ3MoZGVwZW5kZW5jaWVzOiBzdHJpbmdbXSkge1xuICAgIGlmIChkZXBlbmRlbmNpZXMgJiYgZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHdvcmtlciA9IHRoaXMubG9hZFR5cGluZ3NXb3JrZXIoKTtcbiAgICAgIGlmICh3b3JrZXIpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nVHlwaW5ncy5uZXh0KHRydWUpO1xuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGRlcGVuZGVuY2llc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsb2FkRWRpdG9yKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IG9uR290QW1kTG9hZGVyID0gKCkgPT4ge1xuICAgICAgICAoPGFueT53aW5kb3cpLnJlcXVpcmUuY29uZmlnKHtcbiAgICAgICAgICBwYXRoczogeyB2czogYCR7dGhpcy5iYXNlVXJsfS92c2AgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5iYXNlVXJsLnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuICAgICAgICAgIGNvbnN0IHByb3h5U2NyaXB0ID0gYFxuICAgICAgICAgICAgc2VsZi5Nb25hY29FbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICAgICAgYmFzZVVybDogXCIke3RoaXMuYmFzZVVybH1cIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltcG9ydFNjcmlwdHMoJyR7dGhpcy5iYXNlVXJsfS92cy9iYXNlL3dvcmtlci93b3JrZXJNYWluLmpzJyk7XG4gICAgICAgICAgYDtcbiAgICAgICAgICBjb25zdCBwcm94eSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoXG4gICAgICAgICAgICBuZXcgQmxvYihbcHJveHlTY3JpcHRdLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICB3aW5kb3dbJ01vbmFjb0Vudmlyb25tZW50J10gPSB7XG4gICAgICAgICAgICBnZXRXb3JrZXJVcmw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgICg8YW55PndpbmRvdykucmVxdWlyZShbJ3ZzL2VkaXRvci9lZGl0b3IubWFpbiddLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2FkZWQubmV4dCh7IG1vbmFjbyB9KTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgaWYgKCEoPGFueT53aW5kb3cpLnJlcXVpcmUpIHtcbiAgICAgICAgY29uc3QgbG9hZGVyU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIGxvYWRlclNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgIGxvYWRlclNjcmlwdC5zcmMgPSBgJHt0aGlzLmJhc2VVcmx9L3ZzL2xvYWRlci5qc2A7XG4gICAgICAgIGxvYWRlclNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25Hb3RBbWRMb2FkZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxvYWRlclNjcmlwdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbkdvdEFtZExvYWRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iXX0=